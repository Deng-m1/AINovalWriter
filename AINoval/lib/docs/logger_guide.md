# AINoval 日志系统使用指南

## 简介

AINoval项目使用结构化的日志系统代替普通的`print`语句，以提供更强大的调试和问题排查能力。本文档提供了如何在项目各个部分正确使用日志系统的指南。

## 日志级别

日志系统支持多种日志级别，根据信息的重要性和用途选择合适的级别：

| 级别 | 方法 | 用途 | 说明 |
|------|------|------|------|
| Verbose | `AppLogger.v()` | 详细信息 | 非常详细的调试信息，通常只在开发阶段使用 |
| Debug | `AppLogger.d()` | 调试信息 | 开发过程中的调试信息 |
| Info | `AppLogger.i()` | 一般信息 | 记录应用程序的正常运行事件 |
| Warning | `AppLogger.w()` | 警告信息 | 可能存在问题，但不是立即性错误 |
| Error | `AppLogger.e()` | 错误信息 | 发生了错误，但应用程序仍能继续运行 |
| WTF | `AppLogger.wtf()` | 严重错误 | 致命错误，可能导致应用程序崩溃 |

## 使用方法

### 基本用法

```dart
// 记录信息
AppLogger.i('标签', '这是一条信息日志');

// 记录警告
AppLogger.w('标签', '这是一条警告日志');

// 记录错误（带异常信息）
try {
  // 可能引发异常的代码
} catch (e, stackTrace) {
  AppLogger.e('标签', '操作失败', e, stackTrace);
}
```

### 标签命名规范

标签用于标识日志来源，便于过滤和查找。建议使用以下命名规范：

- 使用当前类名或功能模块名作为标签
- 保持一致性，便于过滤和搜索
- 标签首字母大写

推荐的标签命名：

- `Auth`: 身份验证相关
- `Network`: 网络请求相关
- `LocalStorage`: 本地存储相关
- `Editor`: 编辑器相关
- `Novel`: 小说数据相关
- `Sync`: 同步服务相关
- `Chat`: AI聊天相关
- `UI`: 界面交互相关

## 常见的print替换模式

以下是项目中常见的`print`语句替换示例：

```dart
// 原代码：
print('加载小说数据');
// 替换为：
AppLogger.i('Novel', '加载小说数据');

// 原代码：
print('网络请求失败: $e');
// 替换为：
AppLogger.e('Network', '网络请求失败', e);

// 原代码：
print('警告：数据格式不正确');
// 替换为：
AppLogger.w('DataParser', '警告：数据格式不正确');

// 原代码：
print('DEBUG: $value');
// 替换为：
AppLogger.d('Debug', '变量值: $value');
```

## 最佳实践

1. **使用适当的日志级别**
   - 不要将所有内容都记录为Info级别
   - 记录正常流程使用Info
   - 记录调试信息使用Debug
   - 记录异常和错误使用Error

2. **提供有意义的上下文**
   - 在日志消息中包含相关的变量值和状态信息
   - 对于错误，提供有助于识别问题来源的信息

3. **记录重要事件**
   - 用户操作（登录、退出、保存等）
   - 关键业务流程的开始和完成
   - 系统状态变化

4. **避免过度记录**
   - 不要在循环中记录大量日志
   - 避免记录不必要的调试信息，特别是在生产环境中

5. **安全考虑**
   - 不要记录敏感信息（密码、令牌等）
   - 避免记录个人身份信息

## 示例代码

详细的示例代码请参考 `logger_usage_examples.dart` 文件，其中包含了各种场景下的日志使用示例。

## 在生产环境中

在生产环境中，日志系统会自动调整为只显示Info及以上级别的日志，以减少日志量并专注于重要信息。调试相关的日志（Verbose和Debug级别）在生产环境中不会显示。

## 故障排查

如果你在使用日志系统时遇到问题，请确保：

1. `AppLogger.init()` 已在应用程序启动时调用
2. 使用正确的日志级别方法
3. 提供了有效的标签和消息

## 结论

使用结构化的日志系统可以极大地提高应用程序的可维护性和问题排查能力。通过遵循本指南中的最佳实践，你可以更有效地利用日志系统来监控和调试AINoval应用程序。 